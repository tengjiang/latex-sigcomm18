\section{Introduction}
\label{sec:introduction}

%===================Background=====================%

% While it is conventional for the operating system kernel to handle page faults, delegating page fault handling to the userspace has proven to be more flexible in some use cases (in some impactful projects.)

While it is conventional for the operating system kernel to handle page faults, certain prevalent open-source projects have demonstrated the flexibility gained by delegating page fault handling to the userspace.

In Linux, the \textt{userfaultfd()} system call implements such functionality. It is "a proper and more optimal implementation of the PROT\_NONE+SIGSEGV trick.", according to xxx (\teng{How to put this?})
% This page is good. summarize with it: https://docs.kernel.org/admin-guide/mm/userfaultfd.html

%===================uffd mechanism breakdown=====================%
The story of \textt{userfaultfd()} is 
1 faulting thread and one fault handling thread.

domain socket

epoll

userfaultfd was originally developed for container and virtual machine migration.

Live migration can be crucial for large cloud providers, for example, to move client virtual machines out of a failing node transparently. According to Google, live migration is commonly used for VM/Host software Upgrades, Load Balancing, and so on\cite{google-live-migration-at-scale}.

Specfically, post-copy xxx\cite{post-copy}



https://lore.kernel.org/kvm/20230412213510.1220557-1-amoorthy@google.com/T/

%===================Use Cases=====================%

https://tech.nextroll.com/blog/data/2016/11/29/traildb-mmap-s3.html
%===================Use Cases=====================%
CRIU, a xxx, is using userfaultfd()

Firecracker, a xxx, also supports using uffd to let an external process to handle its guest memory page fault

% Firecracker then sends the memory ranges descriptions/mappings along with the Uffd over a UnixDomainSocket specified in 'backend_path' parameter on the API call.

% We need one sentence to show how performance of post-copy migration, for example:

Pre-copy copies states including memory. Post-copy copies states except memory.


https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=9786612
Copying 16GB memory data takes more than 6 minutes in
pre-copy migration. On the contrary, the downtime of post copy migration is only about 320 ms


https://kartikgopalan.github.io/publications/hines09postcopy_osr.pdf
https://duasynt.com/blog/cve-2016-6187-heap-off-by-one-exploit


QEMU/KVM uses the \texttt{userfaultfd()} system call to implement \textit{postcopy live migration}


Migration is not the only use case of \uffd. It's been gathering attention for the flexibility it provides. UMap\cite{file-backed-article, file-backed-proceeding} is a project 


%===================Our Work=====================%

In this extended abstract, we leverage eBPF infrastructure to delegate page fault handling to eBPF programs, which potentially provides a performant and secure way for applications to customize page fault handling.



In the motivation part, we will conduct experiment on the userfaultfd to expose its performance and security issues.



Userfaultfd exposes safety issues 